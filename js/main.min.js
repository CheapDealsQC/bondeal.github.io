function initParallax(){let t=document.querySelectorAll(".parallax-layer"),e=document.querySelector(".hero-enhanced");t.length&&e&&(document.addEventListener("mousemove",function(e){let a=e.clientX/window.innerWidth-.5,o=e.clientY/window.innerHeight-.5;t.forEach(e=>{var t=e.dataset.speed||.05,n=100*a*t,t=50*o*t;e.style.transform=`translate(${n}px, ${t}px)`})}),window.addEventListener("scroll",function(){let a=window.pageYOffset-e.offsetTop;0<=a&&a<=e.offsetHeight&&t.forEach(e=>{var t=e.dataset.scroll||.1,t=a*t,n=e.style.transform,n=n.includes("translate(")?parseFloat(n.split("translate(")[1]):0;e.style.transform=`translate(${n}px, ${t}px)`})}))}function createFloatingElements(){var e=document.querySelector(".hero-enhanced"),t=window.innerWidth<=768;if(e){var n=document.querySelector(".layer-back");if(n){var a=document.querySelector(".layer-mid");if(a){var o=document.querySelector(".layer-front");if(o){var i=t?3:6;for(let e=0;e<i;e++){var r=document.createElement("div"),l=(r.classList.add("spotify-element"),["element-sm","element-md","element-lg"]),l=(r.classList.add(l[Math.floor(Math.random()*l.length)]),["element-primary","element-secondary","element-accent"]);r.classList.add(l[Math.floor(Math.random()*l.length)]),r.style.left=80*Math.random()+10+"%",r.style.top=80*Math.random()+10+"%",r.style.animation=`float ${20+20*Math.random()}s infinite ease-in-out ${5*Math.random()}s`,n.appendChild(r)}if(!t)for(let e=0;e<Math.floor(i/2);e++){var s=document.createElement("div");s.classList.add("note-element"),s.innerHTML=`
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M9 17V5.8C9 5.51997 9 5.37996 9.0545 5.273C9.10243 5.17892 9.17892 5.10243 9.273 5.0545C9.37996 5 9.51997 5 9.8 5H14.2C14.48 5 14.62 5 14.727 5.0545C14.8211 5.10243 14.8976 5.17892 14.9455 5.273C15 5.37996 15 5.51997 15 5.8V17.5C15 19.7091 13.2091 21.5 11 21.5C8.79086 21.5 7 19.7091 7 17.5C7 15.2909 8.79086 13.5 11 13.5C11.4142 13.5 11.8 13.5 12 13.5" 
                    stroke="rgba(29, 185, 84, 0.8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            `,s.style.left=90*Math.random()+5+"%",s.style.top=90*Math.random()+5+"%",s.style.animation=`float ${15+15*Math.random()}s infinite ease-in-out ${5*Math.random()}s`,a.appendChild(s)}if(!t){for(let e=0;e<10;e++){var c=document.createElement("div");c.classList.add("visualization-dot"),c.style.left=10+8*e+"%",c.style.bottom=10+5*Math.random()+"%",c.style.animation=`pulse ${1+.5*Math.random()}s infinite alternate ${.5*Math.random()}s`,o.appendChild(c)}for(let e=0;e<5;e++){var d=document.createElement("div");d.classList.add("visualization-bar"),d.style.right=10+10*e+"%",d.style.bottom="10%",d.style.animation=`scaleHeight ${1+.5*Math.random()}s infinite alternate ${.5*Math.random()}s`,o.appendChild(d)}}}}}}}function debounce(n,a){let o;return function(){let e=this,t=arguments;clearTimeout(o),o=setTimeout(()=>n.apply(e,t),a)}}function createParticles(e,t){var n=document.getElementById(e);if(n){n.innerHTML="";for(let e=0;e<t;e++){var a=document.createElement("div"),o=(a.classList.add("particle"),getRandomSize()),o=(a.classList.add(o),100*Math.random()),i=100*Math.random();a.style.left=o+"%",a.style.top=i+"%",a.style.animationDelay=5*Math.random()+"s",n.appendChild(a)}}}function getRandomSize(){var e=["particle-sm","particle-md","particle-lg"];return e[Math.floor(Math.random()*e.length)]}function addGlowEffect(){let n=document.createElement("div"),a=(n.classList.add("glow-effect"),document.body.appendChild(n),!1);document.addEventListener("mousemove",function(e){var t=e.clientX,e=e.clientY,t=(n.style.left=t-75+"px",n.style.top=e-75+"px",n.style.opacity="1",getElementAtPoint(t,e,".section"));t&&("process"===t.id||"comment-ca-marche"===t.id?a||(n.classList.add("glow-blue"),a=!0):a&&(n.classList.remove("glow-blue"),a=!1))}),document.addEventListener("mouseleave",function(){n.style.opacity="0"})}function getElementAtPoint(e,t,n){e=document.elementFromPoint(e,t);return e?e.closest(n):null}function debounce(t,n=200){let a;return function(...e){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),t(...e)},n)}}function disableAllEffects(){document.querySelectorAll(".particles-container").forEach(e=>{e.innerHTML="",e.style.display="none"}),document.querySelectorAll(".wave-bg").forEach(e=>{e.style.display="none"}),document.querySelectorAll(".gradient-text").forEach(e=>{e.classList.remove("gradient-text")}),document.querySelectorAll(".animate-on-scroll").forEach(e=>{e.classList.add("is-visible"),e.style.opacity="1",e.style.transform="none"}),document.documentElement.classList.add("reduced-motion")}function enhanceParticlesForDarkTheme(){document.querySelectorAll(".particle").forEach(e=>{e.style.opacity="0.2",e.style.filter="blur(1px) brightness(1.3)",e.style.boxShadow="0 0 10px rgba(29, 185, 84, 0.2)",.5<Math.random()?e.style.background="linear-gradient(135deg, rgba(29, 185, 84, 0.7), rgba(67, 130, 255, 0.6))":e.style.background="linear-gradient(135deg, rgba(67, 130, 255, 0.7), rgba(29, 185, 84, 0.6))"}),document.querySelectorAll(".wave-bg").forEach(e=>{var t=document.createElement("style");t.textContent=`
            .wave-bg::before {
                background: linear-gradient(135deg, rgba(29, 185, 84, 0.05), rgba(67, 130, 255, 0.05));
                opacity: 0.1;
            }
            
            .wave-bg::after {
                background: linear-gradient(135deg, rgba(67, 130, 255, 0.05), rgba(29, 185, 84, 0.05));
                opacity: 0.15;
            }
        `,document.head.appendChild(t)}),enhanceGlowForDarkTheme()}function enhanceGlowForDarkTheme(){let t=document.querySelector(".glow-effect");var e;t&&(t.style.filter="blur(30px)",t.style.backgroundImage="radial-gradient(circle, rgba(29, 185, 84, 0.4), transparent 70%)",t.classList.add("dark-theme-glow"),(e=document.createElement("style")).textContent=`
        .glow-effect.dark-theme-glow {
            mix-blend-mode: screen;
            z-index: 2;
        }
        
        .glow-effect.dark-theme-glow.glow-green {
            background-image: radial-gradient(circle, rgba(29, 185, 84, 0.5), transparent 70%);
        }
        
        .glow-effect.dark-theme-glow.glow-blue {
            background-image: radial-gradient(circle, rgba(67, 130, 255, 0.5), transparent 70%);
        }
    `,document.head.appendChild(e),document.addEventListener("mousemove",function(e){document.querySelector(".glow-effect.dark-theme-glow")&&(e=document.elementFromPoint(e.clientX,e.clientY))&&(e.closest(".btn-cta")||e.closest(".feature-icon")||e.closest(".price-card-premium")?(t.classList.add("glow-green"),t.classList.remove("glow-blue")):e.closest("a")||e.closest(".form-control")||e.closest(".testimonial-card")?(t.classList.add("glow-blue"),t.classList.remove("glow-green")):(t.classList.remove("glow-green"),t.classList.remove("glow-blue")))}))}function initMobileOptimizations(){let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;e&&applyMobileOptimizations(),window.addEventListener("resize",debounce(function(){window.innerWidth<768&&!e&&applyMobileOptimizations()},250))}function applyMobileOptimizations(){optimizeGPUAcceleration(),reduceAnimationComplexity(),setupLazyLoading(),optimizeBackgroundEffects(),setupContentVisibility(),optimizeParallaxEffects(),console.log("✅ Mobile optimizations applied")}function optimizeGPUAcceleration(){var e=document.querySelectorAll(".btn-cta, .price-card, .testimonial-card, .faq-item"),t=document.querySelectorAll(".parallax-layer, .hero-content-enhanced, .spotify-element, .note-element");[...e,...t].forEach(e=>{e.style.willChange="transform",e.addEventListener("transitionend",function(){this.style.willChange="auto"},{once:!0})})}function reduceAnimationComplexity(){document.documentElement.classList.add("mobile-optimized");var e=document.createElement("style");e.textContent=`
        @media (max-width: 767px) {
            :root {
                --transition: 0.2s ease !important;
                --transition-slow: 0.3s ease !important;
            }
            
            .animate-on-scroll {
                transition-duration: 0.3s !important;
            }
            
            .testimonial-card, .price-card, .faq-item {
                transition-duration: 0.2s !important;
            }
        }
    `,document.head.appendChild(e)}function setupLazyLoading(){document.querySelectorAll('img:not([loading="lazy"])').forEach(e=>{e.closest(".hero")||e.closest("header")||e.setAttribute("loading","lazy")}),document.querySelectorAll(".section:not(.hero)").forEach((e,t)=>{1<t&&e.classList.add("lazy-background")})}function optimizeBackgroundEffects(){"function"==typeof window.reduceParticleCount&&window.reduceParticleCount(!0),document.querySelectorAll(".wave-bg").forEach(e=>{e.classList.add("mobile-simplified")})}function setupContentVisibility(){var t=document.querySelectorAll(".section");for(let e=2;e<t.length;e++)t[e].style.contentVisibility="auto",t[e].style.containIntrinsicSize="0 500px"}function optimizeParallaxEffects(){var e=document.querySelectorAll(".parallax-layer");0!==e.length&&(isLowPerformanceDevice()?(document.documentElement.classList.add("reduced-motion"),e.forEach(e=>{e.style.transform="none",e.style.transition="none"}),console.log("Parallax effects disabled for low-end mobile device")):(e.forEach(e=>{var t=parseFloat(e.dataset.speed)||.05,n=parseFloat(e.dataset.scroll)||.1;e.dataset.speed=(t/2).toString(),e.dataset.scroll=(n/2).toString()}),document.querySelectorAll(".spotify-element, .note-element").forEach(e=>{var t,n=e.style.animation;n&&n.includes("float")&&(t=n.match(/float\s+(\d+)s/))&&t[1]&&(t=1.5*parseInt(t[1]),e.style.animation=n.replace(/float\s+\d+s/,`float ${t}s`))}),console.log("Parallax effects optimized for mobile")))}function debounce(n,a){let o;return function(){let e=this,t=arguments;clearTimeout(o),o=setTimeout(()=>{n.apply(e,t)},a)}}function isLowPerformanceDevice(){if(void 0!==navigator.deviceMemory&&navigator.deviceMemory<2)return!0;if(void 0!==navigator.hardwareConcurrency&&navigator.hardwareConcurrency<4)return!0;var e=navigator.userAgent.toLowerCase();if(/iphone/.test(e)&&!(/iphone 8/.test(e)||/iphone 9/.test(e)||/iphone 10/.test(e)||/iphone 11/.test(e)||/iphone 12/.test(e)||/iphone 13/.test(e)||/iphone 14/.test(e)||/iphone 15/.test(e)))return!0;var t=e.match(/android\s([0-9\.]*)/);if(t&&parseFloat(t[1])<7)return!0;var n;for(n of["sm-j","sm-g5","sm-a3","redmi","note 5","moto g"])if(e.includes(n))return!0;return!1}function initializeFormEnhancements(){document.querySelectorAll(".form-control").forEach(e=>{""!==e.value.trim()&&e.classList.add("has-value"),e.addEventListener("focus",function(){this.parentElement.classList.add("input-focused")}),e.addEventListener("blur",function(){this.parentElement.classList.remove("input-focused"),""!==this.value.trim()?this.classList.add("has-value"):this.classList.remove("has-value"),validateField(this)}),e.addEventListener("input",debounce(function(){validateField(this)},300))});var e=document.getElementById("tempPass");e&&e.addEventListener("input",evaluatePasswordStrength),document.querySelectorAll(".form-check-input").forEach(e=>{e.addEventListener("change",function(){"check-all"===this.id&&document.querySelectorAll(".required-check:not(#check-all)").forEach(e=>{e.checked=this.checked}),validateCheckboxes()})})}function initializeFormValidation(e){e&&(e.addEventListener("submit",function(e){validateForm(this)||(e.preventDefault(),e.stopPropagation(),showFormError("Veuillez corriger les erreurs dans le formulaire"))}),e.querySelectorAll(".form-control").forEach(e=>{var t,n;e.parentElement.querySelector(".feedback")||((t=document.createElement("div")).className="feedback invalid-feedback",t.id=e.id+"-invalid-feedback",(n=document.createElement("div")).className="feedback valid-feedback",n.id=e.id+"-valid-feedback",n.textContent="Ce champ est valide",e.parentElement.appendChild(t),e.parentElement.appendChild(n))}))}function validateField(e){if(!e)return!1;var t=document.getElementById(e.id+"-invalid-feedback"),n=document.getElementById(e.id+"-valid-feedback");let a=!0,o="";return e.classList.remove("is-valid","is-invalid"),t&&t.classList.remove("visible"),n&&n.classList.remove("visible"),e.required&&""===e.value.trim()?(a=!1,o="Ce champ est requis"):"email"===e.type&&""!==e.value.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(a=!1,o="Veuillez entrer une adresse email valide"):"tempPass"===e.id&&""!==e.value.trim()&&e.value.length<8&&(a=!1,o="Le mot de passe doit contenir au moins 8 caractères"),a?""!==e.value.trim()&&(e.classList.add("is-valid"),n)&&n.classList.add("visible"):(e.classList.add("is-invalid"),t&&(t.textContent=o,t.classList.add("visible"))),updateSubmitButtonState(e.form),a}function validateCheckboxes(){var e=document.getElementById("check-all"),t=document.querySelectorAll(".required-check:not(#check-all)");let n=!0;t.forEach(e=>{e.checked||(n=!1)}),e&&(e.checked=n);t=document.getElementById("paypal-button-container");t&&(n?t.classList.remove("disabled"):t.classList.add("disabled"))}function evaluatePasswordStrength(){var n=document.getElementById("tempPass").value,a=document.getElementById("strength-bar"),o=document.getElementById("password-strength");if(a&&o){var i=8<=n.length,r=/[A-Z]/.test(n),l=/[a-z]/.test(n),s=/\d/.test(n),n=/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(n);let e=0,t=(i&&e++,r&&l&&e++,s&&e++,n&&e++,a.setAttribute("data-strength",e),"Très faible");1===e&&(t="Faible"),2===e&&(t="Moyen"),3===e&&(t="Fort"),4===e&&(t="Très fort"),o.textContent=t}}function validateForm(e){if(!e)return!1;e=e.querySelectorAll(".form-control");let t=!0;return e.forEach(e=>{validateField(e)||(t=!1,e.classList.add("shake-animation"),setTimeout(()=>{e.classList.remove("shake-animation")},500))}),t}function updateSubmitButtonState(e){if(e){var n=e.querySelector(".form-submit");if(n){var a=e.querySelectorAll(".form-control.is-invalid"),e=e.querySelectorAll(".form-control[required]");let t=!1;e.forEach(e=>{""===e.value.trim()&&(t=!0)}),0<a.length||t?n.disabled=!0:n.disabled=!1}}}function showFormError(e){let t=document.getElementById("error-message");t&&(t.textContent=e,t.classList.remove("hidden"),t.classList.add("shake-animation"),setTimeout(()=>{t.classList.remove("shake-animation")},500),setTimeout(()=>{t.classList.add("fade-out"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("fade-out")},300)},5e3))}function debounce(t,n){let a;return function(...e){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),t(...e)},n)}}document.addEventListener("DOMContentLoaded",function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)document.documentElement.classList.add("reduced-motion");else{let t=window.innerWidth<=768,e=(createFloatingElements(),initParallax(),document.querySelector(".scroll-indicator"));if(e&&(e.addEventListener("click",function(){var e=document.getElementById("comment-ca-marche");e&&e.scrollIntoView({behavior:"smooth"})}),window.addEventListener("scroll",function(){100<window.scrollY?e.style.opacity="0":e.style.opacity="0.7"})),!t){let a=document.querySelector(".hero-content-enhanced");a&&(a.addEventListener("mousemove",function(e){var t=a.getBoundingClientRect(),n=e.clientX-t.left,e=5*((e.clientY-t.top)/t.height-.5),n=-5*(n/t.width-.5);a.style.transform=`perspective(1000px) rotateX(${e}deg) rotateY(${n}deg) translateZ(10px)`}),a.addEventListener("mouseleave",function(){a.style.transform="perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)"}))}var n=document.querySelectorAll(".premium-text");if(0<n.length){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("is-visible"),t.unobserve(e.target))})},{threshold:.3});n.forEach(e=>{t.observe(e)})}window.addEventListener("resize",debounce(function(){var e=window.innerWidth<=768;t!=e&&(document.querySelectorAll(".spotify-element, .note-element").forEach(e=>{e.remove()}),createFloatingElements())},250))}}),(()=>{var e=document.createElement("style");e.textContent=`
        @keyframes scaleHeight {
            0% { transform: scaleY(0.3); }
            100% { transform: scaleY(1); }
        }
    `,document.head.appendChild(e)})(),document.addEventListener("DOMContentLoaded",()=>{let e={price:"sections/price-section.html",process:"sections/process-section.html",comparatif:"sections/comparative-section.html"};["price","process","comparatif"].forEach(t=>{let n=document.getElementById(t+"-section");n&&fetch(e[t]).then(e=>e.ok?e.text():Promise.reject(e.statusText)).then(e=>n.innerHTML=e).catch(e=>console.error("Error importing section",t,e))})}),document.addEventListener("DOMContentLoaded",function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)disableAllEffects();else{let a=window.innerWidth<=768,o=window.innerWidth<=480;var e=o?2:a?4:10,t=o?3:a?6:15;window.reduceParticleCount=function(e){(e||a)&&(document.querySelectorAll(".particles-container").forEach(e=>{var t=e.querySelectorAll(".particle");for(let e=0;e<t.length;e++)e%2==0&&t[e].remove()}),(e=document.createElement("style")).textContent=`
                .particle {
                    animation-duration: 60s !important; /* Ralentir pour économiser la CPU */
                }
                .wave-bg::before, .wave-bg::after {
                    animation-duration: 90s !important;
                }
            `,document.head.appendChild(e),console.log("Particle count reduced for mobile optimization"))},createParticles("hero-particles",e),createParticles("process-particles",t),a||addGlowEffect(),document.documentElement.classList.contains("dark-theme")&&enhanceParticlesForDarkTheme(),window.addEventListener("resize",debounce(function(){var e,t=window.innerWidth<=768,n=window.innerWidth<=480;a==t&&o==n||(e=n?4:t?8:15,createParticles("hero-particles",n?3:t?5:10),createParticles("process-particles",e),n=document.querySelector(".glow-effect"),t&&n?n.remove():t||n||addGlowEffect())},250))}}),document.addEventListener("DOMContentLoaded",function(){initMobileOptimizations()}),document.addEventListener("DOMContentLoaded",function(){initializeFormEnhancements(),document.querySelectorAll("form").forEach(e=>{initializeFormValidation(e)})}),document.addEventListener("DOMContentLoaded",()=>{var e=document.getElementById("orderForm");document.getElementById("orderNumber").value="SD-"+Date.now(),e.addEventListener("submit",e=>{var t="1C1GCEA_enCA1146CA1146&oq=&gs_lcrp=EgZjaHJvbWUqEQgDEAAYAxhCGI8BGLQCGOoCMgkIABAjGCcY6gIyCQgBECMYJxjqAjIJCAIQIxgnGOoCMhEIAxAAGAMYQhiPARi0AhjqAjIRCAQQABgDGEIYjwEYtAIY6gIyEQg";document.getElementById("password").value!==t&&(alert("Le mot de passe doit être exactement : "+t),e.preventDefault())})});